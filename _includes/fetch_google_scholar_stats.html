<!-- <script>
    $(document).ready(function () {
        {% if site.google_scholar_stats_use_cdn %}
        var gsDataBaseUrl = 'https://cdn.jsdelivr.net/gh/{{ site.repository }}@'
        {% else %}
        var gsDataBaseUrl = 'https://raw.githubusercontent.com/{{ site.repository }}/'
        {% endif %}
        $.getJSON(gsDataBaseUrl + "google-scholar-stats/gs_data.json", function (data) {
            var totalCitation = data['citedby']
            document.getElementById('total_cit').innerHTML = totalCitation;
            var citationEles = document.getElementsByClassName('show_paper_citations')
            Array.prototype.forEach.call(citationEles, element => {
                var paperId = element.getAttribute('data')
                var numCitations = data['publications'][paperId]['num_citations']
                element.innerHTML = '| Citations: ' + numCitations;
            });
        });
    })
</script>

<!-- jQuery가 먼저 로드되어 있어야 합니다 -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>

<script>
  $(function () {
    var repo = "{{ site.repository }}";
    var branch = "{{ site.google_scholar_stats_branch | default: 'google-scholar-stats' }}";
    var useCdn = {{ site.google_scholar_stats_use_cdn | default: true | jsonify }};

    // CDN: https://cdn.jsdelivr.net/gh/user/repo@branch/path
    // RAW: https://raw.githubusercontent.com/user/repo/branch/path
    var url = useCdn
      ? ("https://cdn.jsdelivr.net/gh/" + repo + "@" + branch + "/google-scholar-stats/gs_data.json")
      : ("https://raw.githubusercontent.com/" + repo + "/" + branch + "/google-scholar-stats/gs_data.json");

    $.getJSON(url)
      .done(function (data) {
        // 총 인용수
        if (document.getElementById('total_cit')) {
          document.getElementById('total_cit').innerHTML = (data['citedby'] || 0);
        }

        // 논문별 인용수
        var eles = document.getElementsByClassName('show_paper_citations');
        Array.prototype.forEach.call(eles, function (el) {
          var pid = el.getAttribute('data'); // 예: "QFeaFbwAAAAJ:7PzlFSSx8tAC"
          var n = 0;
          try {
            n = data['publications'][pid]['num_citations'] || 0;
          } catch (e) { /* 키가 없으면 0 처리 */ }
          el.innerHTML = '| Citations: ' + n;
        });
      })
      .fail(function (xhr, status, err) {
        console.error('Failed to load gs_data.json:', status, err);
      });
  });
</script>
-->